CXX_STD=CXX11
PKG_CPPFLAGS=-I. @PKG_CPPFLAGS@ \
	-DDIC_VERSION=$(DIC_VERSION) \
	$(MECAB_NO_TLS) $(MECAB_USE_UTF8_ONLY) \
	-DMECAB_DEFAULT_RC="\"$(MECAB_DEFAULT_RC)\""
PKG_LIBS=@PKG_LIBS@ $(shell "$(R_HOME)/bin/Rscript" -e "RcppParallel::RcppParallelLibs()")

OBJ = feature_index.o param.o learner.o string_buffer.o \
	char_property.o         learner_tagger.o    tagger.o \
	connector.o             tokenizer.o \
	context_id.o            dictionary.o  utils.o \
	dictionary_compiler.o   viterbi.o \
	dictionary_generator.o  writer.o iconv_utils.o \
	dictionary_rewriter.o   lbfgs.o eval.o nbest_generator.o

.PHONY: all

all: $(SHLIB)

$(SHLIB): $(OBJECTS) $(OBJ) libmecab.o

clean:
	rm -f $(OBJECT) $(OBJ) $(SHLIB)
