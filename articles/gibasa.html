<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="gibasa（日本語テキスト分析のためのRパッケージ）の紹介">
<title>Introduction to gibasa • gibasa</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.1.3/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.1.3/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Introduction to gibasa">
<meta property="og:description" content="gibasa（日本語テキスト分析のためのRパッケージ）の紹介">
<meta property="og:image" content="https://paithiov909.github.io/gibasa/reference/figures/tidytext_fig5_1_mod.drawio.png">
<meta property="og:image:alt" content="Gibasa is a plain ‘Rcpp’ interface to ‘MeCab’, a CJK tokenizer and morphological analysis tool.">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:creator" content="@paithiov909">
<meta name="twitter:site" content="@paithiov909">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">gibasa</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.4.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="active nav-item">
  <a class="nav-link" href="../articles/gibasa.html">Get started</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/quanteda.html">Text Mining with quanteda and gibasa</a>
    <a class="dropdown-item" href="../articles/textrecipes.html">Supervised Learning Using tidymodels and gibasa</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/paithiov909/gibasa/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">



<script src="gibasa_files/core-js-2.5.3/shim.min.js"></script><script src="gibasa_files/react-17.0.0/react.min.js"></script><script src="gibasa_files/react-17.0.0/react-dom.min.js"></script><script src="gibasa_files/reactwidget-1.0.0/react-tools.js"></script><script src="gibasa_files/htmlwidgets-1.5.4/htmlwidgets.js"></script><script src="gibasa_files/reactable-binding-0.3.0/reactable.js"></script><div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Introduction to gibasa</h1>
                        <h4 data-toc-skip class="author">paithiov909</h4>
            
            <h4 data-toc-skip class="date">2022-08-05</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/paithiov909/gibasa/blob/HEAD/vignettes/gibasa.Rmd" class="external-link"><code>vignettes/gibasa.Rmd</code></a></small>
      <div class="d-none name"><code>gibasa.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="gibasaパッケージについて">gibasaパッケージについて<a class="anchor" aria-label="anchor" href="#gibasa%E3%83%91%E3%83%83%E3%82%B1%E3%83%BC%E3%82%B8%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6"></a>
</h2>
<p>gibasaは、Rから<a href="https://taku910.github.io/mecab/" class="external-link">MeCab</a>を利用して形態素解析をおこなうためのパッケージです。</p>
<p>モチベーションとしては、<code>tidytext::unnest_tokens</code>を意識した処理をMeCabを利用しつつできるようにしたいということで開発しています。</p>
<div class="section level3">
<h3 id="インストールの仕方">インストールの仕方<a class="anchor" aria-label="anchor" href="#%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB%E3%81%AE%E4%BB%95%E6%96%B9"></a>
</h3>
<p>GitHubリポジトリからソースパッケージをビルドしてインストールします。ビルド時に<code>mecab-config</code>を呼ぶため、mecabがあらかじめインストールされている必要があります。使っているOSのパッケージマネージャなどからインストールしておいてください。</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">remotes</span><span class="fu">::</span><span class="fu">install_github</span><span class="op">(</span><span class="st">"paithiov909/gibasa"</span><span class="op">)</span></span></code></pre></div>
<p>Windowsの場合、ソースビルドに<a href="https://cran.r-project.org/bin/windows/Rtools/rtools42/rtools.html" class="external-link">Rtools42</a>が必要です。また、gibasaを利用するにはmecabのバイナリが必要なため、gibasaをインストールする前に、pacmanを利用してmecabをインストールしておいてください。具体的には、Rtoolsに付属しているmsys2を起ち上げて、次のコマンドを実行すると入るはずです。</p>
<pre><code>$ pacman -Sy mingw-w64-ucrt-x86_64-mecab mingw-w64-ucrt-x86_64-mecab-naist-jdic</code></pre>
<p>この方法でインストールしたmecabを利用する場合、<code>%RTOOLS42_HOME\ucrt64\bin</code>にパスを通しておいてください。なお、ふつうにx86向けのMeCabをインストーラで導入済みでも、共存できるはずなので問題ないです。インストーラでMeCabを導入済みであれば、とくに<code>sys_dic</code>引数を指定しないかぎり、辞書はおそらくインストーラで入れたものが優先して使用されます。</p>
<p>gibasaについては、CRANリリースはとりあえず考えていません。RcppMeCabがCRANに登録されている前例がありますし、gibasaについてはWindows向けに静的ライブラリを用いたビルドが実現できたため、技術的にはCRANにも登録できそうなのですが、めんどくさそうなのでやらないと思います。がんばってソースパッケージからインストールしてください。</p>
</div>
<div class="section level3">
<h3 id="基本的な使い方">基本的な使い方<a class="anchor" aria-label="anchor" href="#%E5%9F%BA%E6%9C%AC%E7%9A%84%E3%81%AA%E4%BD%BF%E3%81%84%E6%96%B9"></a>
</h3>
<p>gibasaは、次にあげる関数を使って、CJKテキストの分かち書きをすることができるというパッケージです。</p>
<ul>
<li><code><a href="../reference/tokenize.html">gibasa::tokenize</a></code></li>
<li><code><a href="../reference/prettify.html">gibasa::prettify</a></code></li>
<li><code><a href="../reference/pack.html">gibasa::pack</a></code></li>
</ul>
<p>まず、<code>doc_id</code>列と<code>text</code>列をもつデータフレームについて、<code><a href="../reference/tokenize.html">gibasa::tokenize</a></code>でtidy textのかたちにできます（以下の例ではIPA辞書を使っています）。ちなみに、元のデータフレームの<code>doc_id</code>列と<code>text</code>列以外の列は戻り値にも保持されます。</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">audubon</span><span class="fu">::</span><span class="va"><a href="https://paithiov909.github.io/audubon/reference/polano.html" class="external-link">polano</a></span><span class="op">[</span><span class="fl">5</span><span class="op">]</span></span>
<span><span class="co">#&gt; [1] "そのころわたくしは、モリーオ市の博物局に勤めて居りました。"</span></span>
<span></span>
<span><span class="va">dat</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>  doc_id <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq_along</a></span><span class="op">(</span><span class="fu">audubon</span><span class="fu">::</span><span class="va"><a href="https://paithiov909.github.io/audubon/reference/polano.html" class="external-link">polano</a></span><span class="op">[</span><span class="fl">5</span><span class="op">:</span><span class="fl">8</span><span class="op">]</span><span class="op">)</span>,</span>
<span>  text <span class="op">=</span> <span class="fu">audubon</span><span class="fu">::</span><span class="va"><a href="https://paithiov909.github.io/audubon/reference/polano.html" class="external-link">polano</a></span><span class="op">[</span><span class="fl">5</span><span class="op">:</span><span class="fl">8</span><span class="op">]</span>,</span>
<span>  meta <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"aaa"</span>, <span class="st">"bbb"</span>, <span class="st">"ccc"</span>, <span class="st">"ddd"</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">res</span> <span class="op">&lt;-</span> <span class="fu">gibasa</span><span class="fu">::</span><span class="fu"><a href="../reference/tokenize.html">tokenize</a></span><span class="op">(</span><span class="va">dat</span>, <span class="va">text</span>, <span class="va">doc_id</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">res</span><span class="op">)</span></span>
<span><span class="co">#&gt;   doc_id meta sentence_id token_id    token</span></span>
<span><span class="co">#&gt; 1      1  aaa           1        1     その</span></span>
<span><span class="co">#&gt; 2      1  aaa           1        2     ころ</span></span>
<span><span class="co">#&gt; 3      1  aaa           1        3 わたくし</span></span>
<span><span class="co">#&gt; 4      1  aaa           1        4       は</span></span>
<span><span class="co">#&gt; 5      1  aaa           1        5       、</span></span>
<span><span class="co">#&gt; 6      1  aaa           1        6 モリーオ</span></span>
<span><span class="co">#&gt;                                             feature</span></span>
<span><span class="co">#&gt; 1                   連体詞,*,*,*,*,*,その,ソノ,ソノ</span></span>
<span><span class="co">#&gt; 2         名詞,非自立,副詞可能,*,*,*,ころ,コロ,コロ</span></span>
<span><span class="co">#&gt; 3 名詞,代名詞,一般,*,*,*,わたくし,ワタクシ,ワタクシ</span></span>
<span><span class="co">#&gt; 4                      助詞,係助詞,*,*,*,*,は,ハ,ワ</span></span>
<span><span class="co">#&gt; 5                        記号,読点,*,*,*,*,、,、,、</span></span>
<span><span class="co">#&gt; 6                     名詞,固有名詞,地域,一般,*,*,*</span></span></code></pre></div>
<p><code><a href="../reference/prettify.html">gibasa::prettify</a></code>で<code>feature</code>列の素性情報をパースして分割できます。このとき、<code>col_select</code>引数でパースしたい列を指定すると、それらの列だけをパースすることができます。</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fu">gibasa</span><span class="fu">::</span><span class="fu"><a href="../reference/prettify.html">prettify</a></span><span class="op">(</span><span class="va">res</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt;   doc_id meta sentence_id token_id    token   POS1     POS2     POS3 POS4</span></span>
<span><span class="co">#&gt; 1      1  aaa           1        1     その 連体詞     &lt;NA&gt;     &lt;NA&gt; &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 2      1  aaa           1        2     ころ   名詞   非自立 副詞可能 &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 3      1  aaa           1        3 わたくし   名詞   代名詞     一般 &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 4      1  aaa           1        4       は   助詞   係助詞     &lt;NA&gt; &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 5      1  aaa           1        5       、   記号     読点     &lt;NA&gt; &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 6      1  aaa           1        6 モリーオ   名詞 固有名詞     地域 一般</span></span>
<span><span class="co">#&gt;   X5StageUse1 X5StageUse2 Original    Yomi1    Yomi2</span></span>
<span><span class="co">#&gt; 1        &lt;NA&gt;        &lt;NA&gt;     その     ソノ     ソノ</span></span>
<span><span class="co">#&gt; 2        &lt;NA&gt;        &lt;NA&gt;     ころ     コロ     コロ</span></span>
<span><span class="co">#&gt; 3        &lt;NA&gt;        &lt;NA&gt; わたくし ワタクシ ワタクシ</span></span>
<span><span class="co">#&gt; 4        &lt;NA&gt;        &lt;NA&gt;       は       ハ       ワ</span></span>
<span><span class="co">#&gt; 5        &lt;NA&gt;        &lt;NA&gt;       、       、       、</span></span>
<span><span class="co">#&gt; 6        &lt;NA&gt;        &lt;NA&gt;     &lt;NA&gt;</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fu">gibasa</span><span class="fu">::</span><span class="fu"><a href="../reference/prettify.html">prettify</a></span><span class="op">(</span><span class="va">res</span>, col_select <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">3</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt;   doc_id meta sentence_id token_id    token   POS1     POS2     POS3</span></span>
<span><span class="co">#&gt; 1      1  aaa           1        1     その 連体詞     &lt;NA&gt;     &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 2      1  aaa           1        2     ころ   名詞   非自立 副詞可能</span></span>
<span><span class="co">#&gt; 3      1  aaa           1        3 わたくし   名詞   代名詞     一般</span></span>
<span><span class="co">#&gt; 4      1  aaa           1        4       は   助詞   係助詞     &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 5      1  aaa           1        5       、   記号     読点     &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 6      1  aaa           1        6 モリーオ   名詞 固有名詞     地域</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fu">gibasa</span><span class="fu">::</span><span class="fu"><a href="../reference/prettify.html">prettify</a></span><span class="op">(</span><span class="va">res</span>, col_select <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">3</span>, <span class="fl">5</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt;   doc_id meta sentence_id token_id    token   POS1     POS3 X5StageUse1</span></span>
<span><span class="co">#&gt; 1      1  aaa           1        1     その 連体詞     &lt;NA&gt;        &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 2      1  aaa           1        2     ころ   名詞 副詞可能        &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 3      1  aaa           1        3 わたくし   名詞     一般        &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 4      1  aaa           1        4       は   助詞     &lt;NA&gt;        &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 5      1  aaa           1        5       、   記号     &lt;NA&gt;        &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 6      1  aaa           1        6 モリーオ   名詞     地域        &lt;NA&gt;</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fu">gibasa</span><span class="fu">::</span><span class="fu"><a href="../reference/prettify.html">prettify</a></span><span class="op">(</span><span class="va">res</span>, col_select <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"POS1"</span>, <span class="st">"Original"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt;   doc_id meta sentence_id token_id    token   POS1 Original</span></span>
<span><span class="co">#&gt; 1      1  aaa           1        1     その 連体詞     その</span></span>
<span><span class="co">#&gt; 2      1  aaa           1        2     ころ   名詞     ころ</span></span>
<span><span class="co">#&gt; 3      1  aaa           1        3 わたくし   名詞 わたくし</span></span>
<span><span class="co">#&gt; 4      1  aaa           1        4       は   助詞       は</span></span>
<span><span class="co">#&gt; 5      1  aaa           1        5       、   記号       、</span></span>
<span><span class="co">#&gt; 6      1  aaa           1        6 モリーオ   名詞     &lt;NA&gt;</span></span></code></pre></div>
<p><code><a href="../reference/pack.html">gibasa::pack</a></code>を使うと、<code>pull</code>引数で指定した列について、いわゆる「分かち書き」にすることができます。デフォルトでは<code>token</code>列について分かち書きにします。</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">res</span> <span class="op">&lt;-</span> <span class="fu">gibasa</span><span class="fu">::</span><span class="fu"><a href="../reference/prettify.html">prettify</a></span><span class="op">(</span><span class="va">res</span><span class="op">)</span></span>
<span><span class="fu">gibasa</span><span class="fu">::</span><span class="fu"><a href="../reference/pack.html">pack</a></span><span class="op">(</span><span class="va">res</span><span class="op">)</span></span>
<span><span class="co">#&gt;   doc_id</span></span>
<span><span class="co">#&gt; 1      1</span></span>
<span><span class="co">#&gt; 2      2</span></span>
<span><span class="co">#&gt; 3      3</span></span>
<span><span class="co">#&gt; 4      4</span></span>
<span><span class="co">#&gt;                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             text</span></span>
<span><span class="co">#&gt; 1                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     その ころ わたくし は 、 モリーオ 市 の 博物 局 に 勤め て 居り まし た 。</span></span>
<span><span class="co">#&gt; 2 十 八 等 官 でし た から 役所 の なか でも 、 ず うっ と 下 の 方 でし た し 俸給 も ほんの わずか でし た が 、 受持ち が 標本 の 採集 や 整理 で 生れ 付き 好き な こと でし た から 、 わたくし は 毎日 ずいぶん 愉快 に はたらき まし た 。 殊に その ころ 、 モリーオ 市 で は 競馬 場 を 植物 園 に 拵え 直す と いう ので 、 その 景色 の いい まわり に アカシヤ を 植え込ん だ 広い 地面 が 、 切符 売場 や 信号 所 の 建物 の つい た まま 、 わたくし ども の 役所 の 方 へ まわっ て 来 た もの です から 、 わたくし は すぐ 宿直 という 名前 で 月賦 で 買っ た 小さな 蓄音器 と 二 十 枚 ばかり の レコード を もっ て 、 その 番小屋 に ひとり 住む こと に なり まし た 。 わたくし は そこ の 馬 を 置く 場所 に 板 で 小さな し きい を つけ て 一疋 の 山羊 を 飼い まし た 。 毎朝 その 乳 を しぼっ て つめたい パン を ひたし て た べ 、 それ から 黒い 革 の かばん へ すこし の 書類 や 雑誌 を 入れ 、 靴 も きれい に みがき 、 並木 の ポプラ の 影法師 を 大股 にわたって 市 の 役所 へ 出 て 行く の でし た 。</span></span>
<span><span class="co">#&gt; 3                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          あの イーハトーヴォ の すきとおっ た 風 、 夏 で も 底 に 冷た さ を もつ 青い そら 、 うつくしい 森 で 飾ら れ た モリーオ 市 、 郊外 の ぎらぎら ひかる 草 の 波 。</span></span>
<span><span class="co">#&gt; 4                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           また その なか で いっしょ に なっ た たくさん の ひと たち 、 ファゼーロ と ロザーロ 、 羊 飼 の ミーロ や 、 顔 の 赤い こども たち 、 地主 の テーモ 、 山猫 博士 の ボーガント・デストゥパーゴ など 、 いま この 暗い 巨 き な 石 の 建物 の なか で 考え て いる と 、 みんな むかし 風 の なつかしい 青い 幻 燈 の よう に 思わ れ ます 。 で は 、 わたくし は いつか の 小さな み だし を つけ ながら 、 しずか に あの 年 の イーハトーヴォ の 五月 から 十月 まで を 書きつけ ましょ う 。</span></span>
<span><span class="fu">gibasa</span><span class="fu">::</span><span class="fu"><a href="../reference/pack.html">pack</a></span><span class="op">(</span><span class="va">res</span>, <span class="va">POS1</span><span class="op">)</span></span>
<span><span class="co">#&gt;   doc_id</span></span>
<span><span class="co">#&gt; 1      1</span></span>
<span><span class="co">#&gt; 2      2</span></span>
<span><span class="co">#&gt; 3      3</span></span>
<span><span class="co">#&gt; 4      4</span></span>
<span><span class="co">#&gt;                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         text</span></span>
<span><span class="co">#&gt; 1                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 連体詞 名詞 名詞 助詞 記号 名詞 名詞 助詞 名詞 名詞 助詞 動詞 助詞 動詞 助動詞 助動詞 記号</span></span>
<span><span class="co">#&gt; 2 名詞 名詞 名詞 名詞 助動詞 助動詞 助詞 名詞 助詞 名詞 助詞 記号 助動詞 動詞 助詞 名詞 助詞 名詞 助動詞 助動詞 助詞 名詞 助詞 連体詞 副詞 助動詞 助動詞 助詞 記号 動詞 助詞 名詞 助詞 名詞 助詞 名詞 助詞 名詞 名詞 名詞 助動詞 名詞 助動詞 助動詞 助詞 記号 名詞 助詞 名詞 副詞 名詞 助詞 動詞 助動詞 助動詞 記号 副詞 連体詞 名詞 記号 名詞 名詞 助詞 助詞 名詞 名詞 助詞 名詞 名詞 助詞 動詞 動詞 助詞 動詞 助詞 記号 連体詞 名詞 助詞 形容詞 名詞 助詞 名詞 助詞 動詞 助動詞 形容詞 名詞 助詞 記号 名詞 名詞 助詞 名詞 名詞 助詞 名詞 助詞 動詞 助動詞 名詞 記号 名詞 名詞 助詞 名詞 助詞 名詞 助詞 動詞 助詞 動詞 助動詞 名詞 助動詞 助詞 記号 名詞 助詞 副詞 名詞 助詞 名詞 助詞 名詞 助詞 動詞 助動詞 連体詞 名詞 助詞 名詞 名詞 名詞 助詞 助詞 名詞 助詞 動詞 助詞 記号 連体詞 名詞 助詞 副詞 動詞 名詞 助詞 動詞 助動詞 助動詞 記号 名詞 助詞 名詞 助詞 名詞 助詞 動詞 名詞 助詞 名詞 助詞 連体詞 助動詞 名詞 助詞 動詞 助詞 名詞 助詞 名詞 助詞 動詞 助動詞 助動詞 記号 名詞 連体詞 名詞 助詞 動詞 助詞 形容詞 名詞 助詞 動詞 動詞 助動詞 助詞 記号 名詞 助詞 形容詞 名詞 助詞 名詞 助詞 副詞 助詞 名詞 助詞 名詞 助詞 動詞 記号 名詞 助詞 名詞 助詞 動詞 記号 名詞 助詞 名詞 助詞 名詞 助詞 名詞 助詞 名詞 助詞 名詞 助詞 動詞 助詞 動詞 名詞 助動詞 助動詞 記号</span></span>
<span><span class="co">#&gt; 3                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          連体詞 名詞 助詞 動詞 助動詞 名詞 記号 名詞 助詞 助詞 名詞 助詞 形容詞 名詞 助詞 動詞 形容詞 感動詞 記号 形容詞 名詞 助詞 動詞 動詞 助動詞 名詞 名詞 記号 名詞 助詞 副詞 動詞 名詞 助詞 名詞 記号</span></span>
<span><span class="co">#&gt; 4                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   接続詞 連体詞 名詞 助詞 名詞 助詞 動詞 助動詞 名詞 助詞 名詞 名詞 記号 名詞 助詞 名詞 記号 名詞 名詞 助詞 名詞 助詞 記号 名詞 助詞 形容詞 名詞 名詞 記号 名詞 助詞 名詞 記号 名詞 名詞 助詞 名詞 助詞 記号 名詞 連体詞 形容詞 名詞 助動詞 助詞 名詞 助詞 名詞 助詞 名詞 助詞 動詞 助詞 動詞 助詞 記号 名詞 名詞 名詞 助詞 形容詞 形容詞 名詞 名詞 助詞 名詞 助詞 動詞 動詞 助動詞 記号 助動詞 助詞 記号 名詞 助詞 名詞 助詞 連体詞 接頭詞 名詞 助詞 動詞 助詞 記号 名詞 助詞 連体詞 名詞 助詞 名詞 助詞 名詞 助詞 名詞 助詞 助詞 動詞 助動詞 助動詞 記号</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="ベンチマーク">ベンチマーク<a class="anchor" aria-label="anchor" href="#%E3%83%99%E3%83%B3%E3%83%81%E3%83%9E%E3%83%BC%E3%82%AF"></a>
</h3>
<p><a href="https://tokyor.connpass.com/event/244200/" class="external-link">TokyoR #98</a>での<a href="https://paithiov909.github.io/shiryo/gibasa/#11" class="external-link">LTのスライド</a>でも紹介しましたが、ある程度の分量がある文字列ベクトルに対して、ごくふつうに形態素解析だけをやるかぎりにおいては、RMeCabよりもgibasaのほうが解析速度が速いと思います（というより、RMeCabでもmecabを呼んでいる部分はおそらく十分速いのですが、欲しいかたちに加工するためのRの処理に時間がかかることが多いです）。</p>
<p>ただ、gibasaには形態素解析する以外の機能はないので、目的にあわせて好みで使ってください。</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">dat</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>  doc_id <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq_along</a></span><span class="op">(</span><span class="fu">audubon</span><span class="fu">::</span><span class="va"><a href="https://paithiov909.github.io/audubon/reference/polano.html" class="external-link">polano</a></span><span class="op">[</span><span class="fl">5</span><span class="op">:</span><span class="fl">800</span><span class="op">]</span><span class="op">)</span>,</span>
<span>  text <span class="op">=</span> <span class="fu">audubon</span><span class="fu">::</span><span class="va"><a href="https://paithiov909.github.io/audubon/reference/polano.html" class="external-link">polano</a></span><span class="op">[</span><span class="fl">5</span><span class="op">:</span><span class="fl">800</span><span class="op">]</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">gibasa</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu">gibasa</span><span class="fu">::</span><span class="fu"><a href="../reference/tokenize.html">tokenize</a></span><span class="op">(</span><span class="va">dat</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu">gibasa</span><span class="fu">::</span><span class="fu"><a href="../reference/prettify.html">prettify</a></span><span class="op">(</span>col_select <span class="op">=</span> <span class="st">"POS1"</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="va">rmecab</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu">purrr</span><span class="fu">::</span><span class="fu"><a href="https://purrr.tidyverse.org/reference/imap.html" class="external-link">imap_dfr</a></span><span class="op">(</span></span>
<span>    <span class="fu">RMeCab</span><span class="fu">::</span><span class="fu">RMeCabDF</span><span class="op">(</span><span class="va">dat</span>, <span class="fl">2</span><span class="op">)</span>,</span>
<span>    <span class="op">~</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>doc_id <span class="op">=</span> <span class="va">.y</span>, token <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/unname.html" class="external-link">unname</a></span><span class="op">(</span><span class="va">.x</span><span class="op">)</span>, POS1 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">.x</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="va">bench</span> <span class="op">&lt;-</span> <span class="fu">microbenchmark</span><span class="fu">::</span><span class="fu">microbenchmark</span><span class="op">(</span><span class="fu"><a href="../reference/gibasa-package.html">gibasa</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>                                        <span class="fu">rmecab</span><span class="op">(</span><span class="op">)</span>,</span>
<span>                                        times <span class="op">=</span> <span class="fl">20L</span><span class="op">)</span></span>
<span><span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/autoplot.html" class="external-link">autoplot</a></span><span class="op">(</span><span class="va">bench</span><span class="op">)</span></span></code></pre></div>
<div class="figure">
<img src="https://raw.githack.com/paithiov909/gibasa/main/man/figures/benchmark1.png" alt=""><p class="caption">benchmark1</p>
</div>
</div>
</div>
<div class="section level2">
<h2 id="デモ使用するデータ">デモ：使用するデータ<a class="anchor" aria-label="anchor" href="#%E3%83%87%E3%83%A2%E4%BD%BF%E7%94%A8%E3%81%99%E3%82%8B%E3%83%87%E3%83%BC%E3%82%BF"></a>
</h2>
<p>以下では、gibasaを利用した分析のデモとして、gibasaによるテキストの前処理からLDAによるトピックモデリングまでを試してみます。ここでは、以下の10人の作家による文章を使います。</p>
<ul>
<li>芥川龍之介（芥川竜之介）</li>
<li>太宰治</li>
<li>泉鏡花</li>
<li>菊池寛</li>
<li>森鴎外</li>
<li>夏目漱石</li>
<li>岡本綺堂</li>
<li>佐々木味津三</li>
<li>島崎藤村</li>
<li>海野十三</li>
</ul>
<p>青空文庫で公開されているこれらの作家の文章のうち「新字新仮名」のものはあわせて1000篇ほどあるようですが、このうち699篇をランダムに抽出したデータセットをあらかじめ用意しました。次のようにしてダウンロードして読み込みます。</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">tmp</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempfile</a></span><span class="op">(</span>fileext <span class="op">=</span> <span class="st">".zip"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/download.file.html" class="external-link">download.file</a></span><span class="op">(</span><span class="st">"https://github.com/paithiov909/shiryo/raw/main/data/aozora.csv.zip"</span>, <span class="va">tmp</span><span class="op">)</span></span>
<span></span>
<span><span class="va">tbl</span> <span class="op">&lt;-</span> <span class="fu">readr</span><span class="fu">::</span><span class="fu"><a href="https://readr.tidyverse.org/reference/read_delim.html" class="external-link">read_csv</a></span><span class="op">(</span><span class="va">tmp</span>, col_types <span class="op">=</span> <span class="st">"cccf"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>author <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">as.factor</a></span><span class="op">(</span><span class="va">author</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>このデータセットの<code>text</code>列には、それぞれの文章の本文のうち、会話文以外の段落だけをひとまとめにした文字列が含まれています。</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://pillar.r-lib.org/reference/glimpse.html" class="external-link">glimpse</a></span><span class="op">(</span><span class="va">tbl</span><span class="op">)</span></span>
<span><span class="co">#&gt; Rows: 699</span></span>
<span><span class="co">#&gt; Columns: 4</span></span>
<span><span class="co">#&gt; $ doc_id <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "25", "29", "32", "33", "35", "38", "39", "50", "56", "59", "63…</span></span>
<span><span class="co">#&gt; $ title  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "文学好きの家庭から", "カルメン", "大導寺信輔の半生", "第四の夫…</span></span>
<span><span class="co">#&gt; $ text   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "　私の家は代々お奥坊主だったのですが、父も母もはなはだ特徴のな…</span></span>
<span><span class="co">#&gt; $ author <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span> 芥川竜之介, 芥川竜之介, 芥川竜之介, 芥川竜之介, 芥川竜之介, 芥…</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="デモ前処理分かち書きのコツ">デモ：前処理（分かち書き）のコツ<a class="anchor" aria-label="anchor" href="#%E3%83%87%E3%83%A2%E5%89%8D%E5%87%A6%E7%90%86%E5%88%86%E3%81%8B%E3%81%A1%E6%9B%B8%E3%81%8D%E3%81%AE%E3%82%B3%E3%83%84"></a>
</h2>
<p>これを前処理（分かち書き）していくのですが、注意点として、このくらいの分量のテキストデータを一気に<code><a href="../reference/tokenize.html">gibasa::tokenize</a></code>にわたしても、おそらくメモリ不足になってしまい、結果が返ってきません。</p>
<p>たとえば、このデータセットの<code>text</code>列について、文字数を確認すると、おおよそ次のような分量があります。</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">tbl</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>nchar <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/nchar.html" class="external-link">nchar</a></span><span class="op">(</span><span class="va">text</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">author</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarise</a></span><span class="op">(</span></span>
<span>    nchar_mean <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">nchar</span><span class="op">)</span>,</span>
<span>    nchar_median <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/median.html" class="external-link">median</a></span><span class="op">(</span><span class="va">nchar</span><span class="op">)</span>,</span>
<span>    nchar_min <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">min</a></span><span class="op">(</span><span class="va">nchar</span><span class="op">)</span>,</span>
<span>    nchar_max <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">max</a></span><span class="op">(</span><span class="va">nchar</span><span class="op">)</span>,</span>
<span>    n <span class="op">=</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/context.html" class="external-link">n</a></span><span class="op">(</span><span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span><span class="fu">across</span><span class="op">(</span><span class="fu">where</span><span class="op">(</span><span class="va">is.numeric</span><span class="op">)</span>, <span class="va">trunc</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 10 × 6</span></span></span>
<span><span class="co">#&gt;    author       nchar_mean nchar_median nchar_min nchar_max     n</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>             <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> 芥川竜之介         <span style="text-decoration: underline;">5</span>802         <span style="text-decoration: underline;">4</span>073       392     <span style="text-decoration: underline;">38</span>265    81</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> 太宰治             <span style="text-decoration: underline;">9</span>320         <span style="text-decoration: underline;">3</span>865        95    <span style="text-decoration: underline;">100</span>124   117</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> 岡本綺堂          <span style="text-decoration: underline;">12</span>391        <span style="text-decoration: underline;">10</span>208       558    <span style="text-decoration: underline;">108</span>472   133</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> 菊池寛            <span style="text-decoration: underline;">20</span>994        <span style="text-decoration: underline;">11</span>819      <span style="text-decoration: underline;">1</span>244    <span style="text-decoration: underline;">220</span>311    47</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> 泉鏡花            <span style="text-decoration: underline;">19</span>403        <span style="text-decoration: underline;">13</span>428      <span style="text-decoration: underline;">2</span>194    <span style="text-decoration: underline;">126</span>786    66</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> 佐々木味津三       <span style="text-decoration: underline;">9</span>938         <span style="text-decoration: underline;">9</span>724      <span style="text-decoration: underline;">6</span>171     <span style="text-decoration: underline;">15</span>695    32</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> 森鴎外            <span style="text-decoration: underline;">20</span>505         <span style="text-decoration: underline;">7</span>212       780    <span style="text-decoration: underline;">247</span>694    43</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> 夏目漱石          <span style="text-decoration: underline;">23</span>484         <span style="text-decoration: underline;">5</span>718       432    <span style="text-decoration: underline;">243</span>570    56</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> 島崎藤村          <span style="text-decoration: underline;">46</span>506        <span style="text-decoration: underline;">13</span>518      <span style="text-decoration: underline;">1</span>047    <span style="text-decoration: underline;">199</span>333    17</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> 海野十三          <span style="text-decoration: underline;">20</span>015        <span style="text-decoration: underline;">11</span>824       824    <span style="text-decoration: underline;">115</span>979   107</span></span></code></pre></div>
<p>このデータセット中で、文字数ベースでもっとも分量が多い文章は、森鴎外『ファウスト』です。とりあえず『ファウスト』のみについて<code><a href="../reference/tokenize.html">gibasa::tokenize</a></code>してみると、これだけですでに152,000トークンあります。これくらいの分量の文章はデータセット中にほかにもあるようなので、このデータセット全部を分かち書きするとしたら、総トークン数の目安として45万トークンくらいは軽く超えてきそうです。</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">tbl</span>, <span class="va">title</span> <span class="op">==</span> <span class="st">"ファウスト"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>nchar <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/nchar.html" class="external-link">nchar</a></span><span class="op">(</span><span class="va">text</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="op">-</span><span class="va">text</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 1 × 4</span></span></span>
<span><span class="co">#&gt;   doc_id title      author  nchar</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> 50909  ファウスト 森鴎外 <span style="text-decoration: underline;">247</span>694</span></span>
<span></span>
<span><span class="va">gbs_split_t</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">tbl</span>, <span class="va">title</span> <span class="op">==</span> <span class="st">"ファウスト"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu">gibasa</span><span class="fu">::</span><span class="fu"><a href="../reference/tokenize.html">tokenize</a></span><span class="op">(</span>split <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span><span class="va">gbs_split_f</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">tbl</span>, <span class="va">title</span> <span class="op">==</span> <span class="st">"ファウスト"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu">gibasa</span><span class="fu">::</span><span class="fu"><a href="../reference/tokenize.html">tokenize</a></span><span class="op">(</span>split <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="fu">gbs_split_t</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 152619</span></span></code></pre></div>
<p><code><a href="../reference/tokenize.html">gibasa::tokenize</a></code>は<code>text_field</code>引数で指定した列に含まれる総トークン数行×3列のデータフレームを戻り値として返します。その戻り値に対して何も考えずに<code><a href="../reference/prettify.html">gibasa::prettify</a></code>すると、<code>feature</code>列がさらに複数列に分割されるため、総トークン数が45万行あればそれだけでも45万行×十数列のデータフレームになります。それだけの量のtidy textを一気に扱うのは、あまり現実的ではありません。</p>
<p>また、gibasaは、要素あたり数万字あるような文字列でもいちおう分かち書きできるはずですが、どちらかというと要素あたりの文字数はほどほどである文字列ベクトルを念頭にvectorizeされているため、短めの文書の集合に対してのほうが安定して動作します。そのため、要素ごとに長い文章に対しては<code>split=TRUE</code>にしたほうが速いケースが多くなるはずです（デフォルトでは<code>FALSE</code>になっています）。</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">bench</span> <span class="op">&lt;-</span> <span class="fu">microbenchmark</span><span class="fu">::</span><span class="fu">microbenchmark</span><span class="op">(</span><span class="fu">gbs_split_t</span><span class="op">(</span><span class="op">)</span>,</span>
<span>                                        <span class="fu">gbs_split_f</span><span class="op">(</span><span class="op">)</span>,</span>
<span>                                        times <span class="op">=</span> <span class="fl">3L</span><span class="op">)</span></span>
<span><span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/autoplot.html" class="external-link">autoplot</a></span><span class="op">(</span><span class="va">bench</span><span class="op">)</span></span></code></pre></div>
<div class="figure">
<img src="https://raw.githack.com/paithiov909/gibasa/main/man/figures/benchmark2.png" alt=""><p class="caption">bencmark2</p>
</div>
<p>そこで、ここではひとまず単純に形態素解析するテキストの分量を減らします。以下では、文章あたりの文字数が5000字よりも少ないデータだけを使うことにします。これでも、全部で228篇あります。</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">tbl</span> <span class="op">&lt;-</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">tbl</span>, <span class="fu"><a href="https://rdrr.io/r/base/nchar.html" class="external-link">nchar</a></span><span class="op">(</span><span class="va">text</span><span class="op">)</span> <span class="op">&lt;</span> <span class="fl">5000</span><span class="op">)</span></span>
<span><span class="va">tbl</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>nchar <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/nchar.html" class="external-link">nchar</a></span><span class="op">(</span><span class="va">text</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">author</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarise</a></span><span class="op">(</span></span>
<span>    nchar_mean <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">nchar</span><span class="op">)</span>,</span>
<span>    nchar_median <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/median.html" class="external-link">median</a></span><span class="op">(</span><span class="va">nchar</span><span class="op">)</span>,</span>
<span>    nchar_min <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">min</a></span><span class="op">(</span><span class="va">nchar</span><span class="op">)</span>,</span>
<span>    nchar_max <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">max</a></span><span class="op">(</span><span class="va">nchar</span><span class="op">)</span>,</span>
<span>    n <span class="op">=</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/context.html" class="external-link">n</a></span><span class="op">(</span><span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span><span class="fu">across</span><span class="op">(</span><span class="fu">where</span><span class="op">(</span><span class="va">is.numeric</span><span class="op">)</span>, <span class="va">trunc</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 9 × 6</span></span></span>
<span><span class="co">#&gt;   author     nchar_mean nchar_median nchar_min nchar_max     n</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>           <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> 芥川竜之介       <span style="text-decoration: underline;">2</span>337         <span style="text-decoration: underline;">2</span>167       392      <span style="text-decoration: underline;">4</span>811    49</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> 太宰治           <span style="text-decoration: underline;">1</span>691         <span style="text-decoration: underline;">1</span>294        95      <span style="text-decoration: underline;">4</span>584    63</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> 岡本綺堂         <span style="text-decoration: underline;">2</span>850         <span style="text-decoration: underline;">2</span>740       558      <span style="text-decoration: underline;">4</span>979    32</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> 菊池寛           <span style="text-decoration: underline;">2</span>857         <span style="text-decoration: underline;">2</span>197      <span style="text-decoration: underline;">1</span>244      <span style="text-decoration: underline;">4</span>601     7</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> 泉鏡花           <span style="text-decoration: underline;">3</span>731         <span style="text-decoration: underline;">4</span>002      <span style="text-decoration: underline;">2</span>194      <span style="text-decoration: underline;">4</span>800    12</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span> 森鴎外           <span style="text-decoration: underline;">2</span>427         <span style="text-decoration: underline;">2</span>166       780      <span style="text-decoration: underline;">4</span>574    12</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">7</span> 夏目漱石         <span style="text-decoration: underline;">2</span>337         <span style="text-decoration: underline;">1</span>829       432      <span style="text-decoration: underline;">4</span>720    24</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">8</span> 島崎藤村         <span style="text-decoration: underline;">1</span>978         <span style="text-decoration: underline;">2</span>172      <span style="text-decoration: underline;">1</span>047      <span style="text-decoration: underline;">2</span>993     5</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">9</span> 海野十三         <span style="text-decoration: underline;">2</span>949         <span style="text-decoration: underline;">2</span>475       824      <span style="text-decoration: underline;">4</span>728    24</span></span></code></pre></div>
<p>さらに、実際にこれくらいの規模のテキストデータを形態素解析するにあたっては、最終的に欲しいかたちのデータになるように元のデータセットを小分けにしながら処理するのが無難です。</p>
<p>たとえば、ここでは、トークンのなかでも未知語でないもので、かつ、名詞・形容詞・動詞についてのみを、辞書に収録されている原形で抽出し、品詞情報とあわせて「/」で区切ったタグ付き単語の分かち書きにしています。このとき、以下のように、<code>chunk</code>という新しくつくった列についてグルーピングし、適当なサイズのまとまりごとに<code>text</code>列を処理しています。</p>
<p>また、このとき<code>col_select</code>引数をわたさずに<code><a href="../reference/prettify.html">gibasa::prettify</a></code>すると、いちいち9列ある素性（IPA辞書の場合）をすべてパースしてしまいます。必要な列だけをパースしたほうがメモリ使用量的により安心なため、なるべく後から処理に使う列だけをこまめに指定するようにしてください。</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">corp</span> <span class="op">&lt;-</span> <span class="va">tbl</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span></span>
<span>    text <span class="op">=</span> <span class="fu">audubon</span><span class="fu">::</span><span class="fu"><a href="https://paithiov909.github.io/audubon/reference/strj_normalize.html" class="external-link">strj_normalize</a></span><span class="op">(</span><span class="va">text</span><span class="op">)</span>,</span>
<span>    chunk <span class="op">=</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/ranking.html" class="external-link">ntile</a></span><span class="op">(</span><span class="va">doc_id</span>, <span class="fl">10</span><span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">chunk</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_map.html" class="external-link">group_map</a></span><span class="op">(</span><span class="kw">function</span><span class="op">(</span><span class="va">df</span>, <span class="va">idx</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>      doc_id <span class="op">=</span> <span class="va">df</span><span class="op">$</span><span class="va">doc_id</span>,</span>
<span>      text <span class="op">=</span> <span class="va">df</span><span class="op">$</span><span class="va">text</span></span>
<span>    <span class="op">)</span> <span class="op">|&gt;</span></span>
<span>      <span class="fu">gibasa</span><span class="fu">::</span><span class="fu"><a href="../reference/tokenize.html">tokenize</a></span><span class="op">(</span>split <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>      <span class="fu">gibasa</span><span class="fu">::</span><span class="fu"><a href="../reference/prettify.html">prettify</a></span><span class="op">(</span>col_select <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"POS1"</span>, <span class="st">"Original"</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>      <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span></span>
<span>        <span class="va">POS1</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"名詞"</span>, <span class="st">"形容詞"</span>, <span class="st">"動詞"</span><span class="op">)</span>,</span>
<span>        <span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">Original</span><span class="op">)</span></span>
<span>      <span class="op">)</span> <span class="op">|&gt;</span></span>
<span>      <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>token <span class="op">=</span> <span class="fu">stringr</span><span class="fu">::</span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_c.html" class="external-link">str_c</a></span><span class="op">(</span><span class="va">Original</span>, <span class="va">POS1</span>, sep <span class="op">=</span> <span class="st">"/"</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>      <span class="fu">gibasa</span><span class="fu">::</span><span class="fu"><a href="../reference/pack.html">pack</a></span><span class="op">(</span><span class="va">token</span><span class="op">)</span></span>
<span>  <span class="op">}</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">purrr</span><span class="fu">::</span><span class="fu"><a href="https://purrr.tidyverse.org/reference/map.html" class="external-link">map_dfr</a></span><span class="op">(</span><span class="op">~</span><span class="va">.</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html" class="external-link">left_join</a></span><span class="op">(</span><span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">tbl</span>, <span class="va">doc_id</span>, <span class="va">author</span><span class="op">)</span>, by <span class="op">=</span> <span class="st">"doc_id"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">quanteda</span><span class="fu">::</span><span class="fu"><a href="https://quanteda.io/reference/corpus.html" class="external-link">corpus</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">corp</span><span class="op">)</span></span>
<span><span class="co">#&gt; Corpus consisting of 6 documents and 1 docvar.</span></span>
<span><span class="co">#&gt; 100 :</span></span>
<span><span class="co">#&gt; "むかし/名詞 むかし/名詞 むかし/名詞 深い/形容詞 山/名詞 奥/名詞 大きい/形容詞 桃/名詞 木/名詞 一/名詞..."</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; 102 :</span></span>
<span><span class="co">#&gt; "書/名詞 紀/名詞 よる/動詞 日本/名詞 推古天皇/名詞 三/名詞 十/名詞 五/名詞 年/名詞 春/名詞 二月/名詞..."</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; 103 :</span></span>
<span><span class="co">#&gt; "冬/名詞 夜/名詞 私/名詞 旧友/名詞 村上/名詞 一/名詞 しょ/名詞 銀座/名詞 通り/名詞 歩く/動詞 いる/動..."</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; 1059 :</span></span>
<span><span class="co">#&gt; "何/名詞 書/名詞 アテ/名詞 稲荷/名詞 サン/名詞 境内/名詞 立/名詞 面白/名詞 クモ/名詞 ナイ/名詞 絵馬/..."</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; 1061 :</span></span>
<span><span class="co">#&gt; "雛/名詞 女/名詞 夫/名詞 雛/名詞 言う/動詞 さら/名詞 桜/名詞 雛/名詞 柳/名詞 雛/名詞 花/名詞 菜/名..."</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; 107 :</span></span>
<span><span class="co">#&gt; "僕/名詞 何/名詞 雑木/名詞 生える/動詞 寂しい/形容詞 崖/名詞 上/名詞 歩く/動詞 行く/動詞 崖/名詞 下/..."</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="デモlda">デモ：LDA<a class="anchor" aria-label="anchor" href="#%E3%83%87%E3%83%A2lda"></a>
</h2>
<p>ここまでで抽出した文書から関心のある品詞だけを分かち書きにしつつ、quantedaのコーパスオブジェクトのかたちにしました。ここからはquantedaの関数を使いながら、簡単に<code><a href="https://rdrr.io/pkg/topicmodels/man/lda.html" class="external-link">topicmodels::LDA</a></code>によるLDAの実行までを試してみます。</p>
<p>quantedaでこのようなかたちのコーパスから文書単語行列を得るには、次のようにします。この時点で、トークン数（異なり語の数）は17,000語ほどあります。</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">dtm</span> <span class="op">&lt;-</span> <span class="va">corp</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">quanteda</span><span class="fu">::</span><span class="fu"><a href="https://quanteda.io/reference/tokens.html" class="external-link">tokens</a></span><span class="op">(</span>what <span class="op">=</span> <span class="st">"fastestword"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">quanteda</span><span class="fu">::</span><span class="fu"><a href="https://quanteda.io/reference/dfm.html" class="external-link">dfm</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">quanteda</span><span class="fu">::</span><span class="fu"><a href="https://quanteda.io/reference/dfm_weight.html" class="external-link">dfm_weight</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">quanteda</span><span class="fu">::</span><span class="fu"><a href="https://quanteda.io/reference/ndoc.html" class="external-link">nfeat</a></span><span class="op">(</span><span class="va">dtm</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 17738</span></span></code></pre></div>
<p>これくらいであればこのままでもよさそうですが、もう少し語彙を減らしたい場合、たとえば、次のように<code><a href="https://quanteda.io/reference/dfm_trim.html" class="external-link">quanteda::dfm_trim</a></code>します。これで、ここでは4,000語くらいまで語彙を減らすことができました。</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">dtm</span> <span class="op">&lt;-</span> <span class="va">dtm</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">quanteda</span><span class="fu">::</span><span class="fu"><a href="https://quanteda.io/reference/dfm_trim.html" class="external-link">dfm_trim</a></span><span class="op">(</span>min_termfreq <span class="op">=</span> <span class="fl">5L</span>, max_termfreq <span class="op">=</span> <span class="fl">50L</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">quanteda</span><span class="fu">::</span><span class="fu"><a href="https://quanteda.io/reference/ndoc.html" class="external-link">nfeat</a></span><span class="op">(</span><span class="va">dtm</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 4098</span></span></code></pre></div>
<p><code><a href="https://quanteda.io/reference/convert.html" class="external-link">quanteda::convert</a></code>でdfmオブジェクトを変換して<code><a href="https://rdrr.io/pkg/topicmodels/man/lda.html" class="external-link">topicmodels::LDA</a></code>にわたします。</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">lda_res</span> <span class="op">&lt;-</span></span>
<span>  <span class="fu">quanteda</span><span class="fu">::</span><span class="fu"><a href="https://quanteda.io/reference/convert.html" class="external-link">convert</a></span><span class="op">(</span><span class="va">dtm</span>, to <span class="op">=</span> <span class="st">"topicmodels"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">topicmodels</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/topicmodels/man/lda.html" class="external-link">LDA</a></span><span class="op">(</span>k <span class="op">=</span> <span class="fl">5</span><span class="op">)</span></span></code></pre></div>
<p>割り当てられたトピックを確認してみます。それぞれの文章の内容についてあまり理解していないため、ここではそれぞれのトピックの解釈はしませんが、比較的作家ごとにまとまって一つのトピックに属しているようにも見えます。</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">topics</span> <span class="op">&lt;-</span></span>
<span>  <span class="fu">topicmodels</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/topicmodels/man/get.html" class="external-link">topics</a></span><span class="op">(</span><span class="va">lda_res</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">tibble</span><span class="fu">::</span><span class="fu"><a href="https://tibble.tidyverse.org/reference/enframe.html" class="external-link">enframe</a></span><span class="op">(</span>name <span class="op">=</span> <span class="st">"doc_id"</span>, value <span class="op">=</span> <span class="st">"topic"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html" class="external-link">right_join</a></span><span class="op">(</span></span>
<span>    <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">tbl</span>, <span class="op">!</span><span class="va">text</span><span class="op">)</span>,</span>
<span>    by <span class="op">=</span> <span class="st">"doc_id"</span></span>
<span>  <span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html" class="external-link">arrange</a></span><span class="op">(</span><span class="va">topic</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">reactable</span><span class="fu">::</span><span class="fu"><a href="https://glin.github.io/reactable/reference/reactable.html" class="external-link">reactable</a></span><span class="op">(</span></span>
<span>  <span class="va">topics</span>,</span>
<span>  filterable <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  searchable <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  compact <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
<div id="htmlwidget-f8ea7103aabbb784185c" class="reactable html-widget" style="width:auto;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-f8ea7103aabbb784185c">{"x":{"tag":{"name":"Reactable","attribs":{"data":{"doc_id":["100","140","1562","1596","1599","1604","18349","18359","2264","2274","2294","2372","24449","254","2597","261","2673","2675","2676","29","303","33","33218","42355","43090","45254","45511","45675","45688","45689","46597","49520","49521","49523","49528","49540","49541","49547","49551","49563","53185","685","787","96","1059","1188","129","138","1603","175","187","2079","2686","2692","3359","42362","43017","43042","43050","43362","43366","43732","45484","45509","48031","48332","49530","49534","49550","49562","50105","50913","51214","57476","59435","688","777","784","872","102","103","1239","1343","142","1572","1589","1590","1592","1598","1602","1605","2315","2317","2383","241","24457","2599","274","284","296","3050","309","310","3229","3342","3343","3520","42353","42358","42364","42365","42368","42371","42372","43069","43590","43632","43665","43718","43762","43838","45674","45691","46591","46599","50910","52238","58613","63","74","877","1061","107","109","110","125","131","150","167","176","181","2374","243","25","280","292","3051","3346","3357","3426","3427","35","3647","4306","43365","43373","43470","43573","43667","46459","48036","48327","49522","49545","49560","499","4999","50052","56463","56511","797","88","92","113","119","1387","1388","144","1593","1600","1601","1608","18351","2050","2313","2373","2376","2396","2668","2669","2670","2672","2674","2679","2681","2682","2949","4090","42354","42357","42360","42369","42370","43016","43071","43361","43368","43369","43371","43375","43377","43382","43383","43386","43388","43629","45271","45673","47148","47337","48329","48388","49529","56512","58611","766","795","89"],"topic":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],"title":["桃太郎","猿蟹合戦","朝","容貌","天狗","小説の面白さ","困惑の弁","作家の像","失敗園","雀こ","やんぬる哉","明治座の所感を虚子君に問れて","春","デカダン抗議","木精","母","入社の辞","余と万年筆","落第","カルメン","女人訓戒","第四の夫から","中国怪奇小説集","豊島与志雄著『高尾ざんげ』解説","栗の花","花子","平造とお鶴","自信の無さ","五所川原","砂子屋","青森","私の机","我家の園芸","雪の一日","三崎町の原","読書雑感","当今の劇壇をこのままに","島原の夢","源之助の一生","米国の松王劇","幸福","サフラン","博士問題とマードック先生と余","松江印象記","走ラヌ名馬","星あかり","或恋愛小説","三右衛門の罪","かくめい","海のほとり","百合","余興","骸骨館","田端日記","沈没男","田舎者","蜜柑","池袋の怪","河童小僧","飯田蛇笏","鴨猟","寒山拾得縁起","牛","放し鰻","木曽の怪物","遠野の奇聞","風呂を買うまで","はなしの話","郊外生活の一年","磯部の若葉","金時計","釣","雑信一束","木精（三尺角拾遺）","兎と亀","杯","京に着ける夕","三山居士","幸運の黒子","貉","妙な話","殺人の涯","我が馬券哲学","青年と死","I can speak","悶悶日記","思案の敗北","一日の労苦","一問一答","小志","徒党について","戦争からきた行き違い","待つ","学者と名誉","美男子と煙草","古典竜頭蛇尾","食堂","女類","禁酒の心","雌に就いて","洪水大陸を呑む","親という二字","フォスフォレッスセンス","氷河期の怪人","のろのろ砲弾の驚異","人造人間戦車の機密","一九五〇年の殺人","女人創造","「晩年」に就いて","緒方氏を殺した者","織田君の死","政治家と家庭","答案落第","返事","一つの約束","名士訪問記","最小人間の怪","『十八時の音楽浴』の作者の言葉","科学時潮","成層圏飛行と私のメモ","三重宙返りの記","私信","横綱","奉行と人相学","純真","不苦心談","『火星兵団』の作者の言葉","探偵小説と犯罪事件","じゅりあの・吉助","片恋","千年後の世界","雛がたり","年末の一日","尼提","日光小品","おしの","老年","葬儀記","点鬼簿","運","槍が岳に登った記","足袋","眉山","文学好きの家庭から","喝采","リイズ","密林荘事件","毒瓦斯発明官","空気男","若菜のうち","栃の実","英雄の器","海の使者","形","格さんと食慾","小杉未醒氏","世界怪談名作集","春昼","あの世から便りをする話","秋草","小坂部伝説","一景話題","妖怪漫談","正月の思い出","叔父と甥と","勝負事","世界怪談名作集","三人の訪問者","深川の老漁夫","餅を買う女","初秋の一日","黄粱夢","蜘蛛の糸","沼地","お時儀","私の日常道徳","志賀直哉氏の作品","仙人","一歩前進二歩退却","芸術ぎらい","わが半生を語る","パウロの混乱","「晩年」と「女生徒」","空車","『東洋美術図譜』","虚子君へ","博士問題の成行","文芸の主義","『土』に就て","岡本一平著並画『探訪画趣』序","木下杢太郎『唐草表紙』序","『吾輩は猫である』下篇自序","元日","文士の生活","文芸は男子一生の事業とするに足らざる乎","長塚節氏の小説「土」","朝飯","世界怪談名作集","鬱屈禍","「グッド・バイ」作者の言葉","新しい形の個人主義","創作余談","多頭蛇哲学","トロッコ","炎天汗談","兄貴のような心持","「菊池寛全集」の序","久保田万太郎氏","久米正雄氏の事","剛才人と柔才人と","佐藤春夫氏の事","滝田哲太郎君","滝田哲太郎氏","出来上った人","夏目先生と滝田さん","白銅貨の効用","夏目漱石論","私の著作集","『吾輩は猫である』上篇自序","一寸怪","おばけずきのいわれ少々と処女作","幼い頃の記憶","亡びゆく花","四谷怪談異説","江戸推理川柳抄","コンラッドの描きたる自然について","子規の画","校正後に"],"author":["芥川竜之介","芥川竜之介","太宰治","太宰治","太宰治","太宰治","太宰治","太宰治","太宰治","太宰治","太宰治","夏目漱石","太宰治","太宰治","森鴎外","太宰治","夏目漱石","夏目漱石","夏目漱石","芥川竜之介","太宰治","芥川竜之介","岡本綺堂","太宰治","岡本綺堂","森鴎外","岡本綺堂","太宰治","太宰治","太宰治","太宰治","岡本綺堂","岡本綺堂","岡本綺堂","岡本綺堂","岡本綺堂","岡本綺堂","岡本綺堂","岡本綺堂","岡本綺堂","島崎藤村","森鴎外","夏目漱石","芥川竜之介","太宰治","泉鏡花","芥川竜之介","芥川竜之介","太宰治","芥川竜之介","芥川竜之介","森鴎外","海野十三","芥川竜之介","海野十三","太宰治","芥川竜之介","岡本綺堂","岡本綺堂","芥川竜之介","芥川竜之介","森鴎外","岡本綺堂","岡本綺堂","岡本綺堂","泉鏡花","岡本綺堂","岡本綺堂","岡本綺堂","岡本綺堂","泉鏡花","森鴎外","芥川竜之介","泉鏡花","菊池寛","森鴎外","夏目漱石","夏目漱石","海野十三","芥川竜之介","芥川竜之介","海野十三","菊池寛","芥川竜之介","太宰治","太宰治","太宰治","太宰治","太宰治","太宰治","太宰治","夏目漱石","太宰治","夏目漱石","太宰治","太宰治","森鴎外","太宰治","太宰治","太宰治","海野十三","太宰治","太宰治","海野十三","海野十三","海野十三","海野十三","太宰治","太宰治","太宰治","太宰治","太宰治","太宰治","太宰治","太宰治","海野十三","海野十三","海野十三","海野十三","海野十三","海野十三","太宰治","太宰治","菊池寛","太宰治","森鴎外","海野十三","海野十三","芥川竜之介","芥川竜之介","海野十三","泉鏡花","芥川竜之介","芥川竜之介","芥川竜之介","芥川竜之介","芥川竜之介","芥川竜之介","芥川竜之介","芥川竜之介","芥川竜之介","島崎藤村","太宰治","芥川竜之介","太宰治","太宰治","海野十三","海野十三","海野十三","泉鏡花","泉鏡花","芥川竜之介","泉鏡花","菊池寛","芥川竜之介","芥川竜之介","岡本綺堂","太宰治","海野十三","島崎藤村","岡本綺堂","泉鏡花","岡本綺堂","岡本綺堂","岡本綺堂","菊池寛","岡本綺堂","島崎藤村","岡本綺堂","岡本綺堂","夏目漱石","芥川竜之介","芥川竜之介","芥川竜之介","芥川竜之介","菊池寛","菊池寛","芥川竜之介","太宰治","太宰治","太宰治","太宰治","太宰治","森鴎外","夏目漱石","夏目漱石","夏目漱石","森鴎外","夏目漱石","夏目漱石","夏目漱石","夏目漱石","夏目漱石","夏目漱石","夏目漱石","夏目漱石","島崎藤村","岡本綺堂","太宰治","太宰治","太宰治","太宰治","太宰治","芥川竜之介","太宰治","芥川竜之介","芥川竜之介","芥川竜之介","芥川竜之介","芥川竜之介","芥川竜之介","芥川竜之介","芥川竜之介","芥川竜之介","芥川竜之介","海野十三","森鴎外","太宰治","夏目漱石","泉鏡花","泉鏡花","泉鏡花","岡本綺堂","岡本綺堂","海野十三","夏目漱石","夏目漱石","芥川竜之介"]},"columns":[{"accessor":"doc_id","name":"doc_id","type":"character"},{"accessor":"topic","name":"topic","type":"numeric"},{"accessor":"title","name":"title","type":"character"},{"accessor":"author","name":"author","type":"factor"}],"filterable":true,"searchable":true,"defaultPageSize":10,"paginationType":"numbers","showPageInfo":true,"minRows":1,"compact":true,"dataKey":"4d21fcbb72eee7c9a1a02928e5ef1ee9"},"children":[]},"class":"reactR_markup"},"evals":[],"jsHooks":[]}</script>
</div>
<div class="section level2">
<h2 id="セッション情報">セッション情報<a class="anchor" aria-label="anchor" href="#%E3%82%BB%E3%83%83%E3%82%B7%E3%83%A7%E3%83%B3%E6%83%85%E5%A0%B1"></a>
</h2>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">sessioninfo</span><span class="fu">::</span><span class="fu"><a href="https://r-lib.github.io/sessioninfo/reference/session_info.html" class="external-link">session_info</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB; font-weight: bold;">─ Session info ───────────────────────────────────────────────────────────────</span></span></span>
<span><span class="co">#&gt;  <span style="color: #555555; font-style: italic;">setting </span> <span style="color: #555555; font-style: italic;">value</span></span></span>
<span><span class="co">#&gt;  version  R version 4.2.1 (2022-06-23)</span></span>
<span><span class="co">#&gt;  os       Ubuntu 20.04.4 LTS</span></span>
<span><span class="co">#&gt;  system   x86_64, linux-gnu</span></span>
<span><span class="co">#&gt;  ui       X11</span></span>
<span><span class="co">#&gt;  language en</span></span>
<span><span class="co">#&gt;  collate  C.UTF-8</span></span>
<span><span class="co">#&gt;  ctype    C.UTF-8</span></span>
<span><span class="co">#&gt;  tz       UTC</span></span>
<span><span class="co">#&gt;  date     2022-08-05</span></span>
<span><span class="co">#&gt;  pandoc   2.14.2 @ /usr/bin/ (via rmarkdown)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB; font-weight: bold;">─ Packages ───────────────────────────────────────────────────────────────────</span></span></span>
<span><span class="co">#&gt;  <span style="color: #555555; font-style: italic;">package     </span> <span style="color: #555555; font-style: italic;">*</span> <span style="color: #555555; font-style: italic;">version</span> <span style="color: #555555; font-style: italic;">date (UTC)</span> <span style="color: #555555; font-style: italic;">lib</span> <span style="color: #555555; font-style: italic;">source</span></span></span>
<span><span class="co">#&gt;  audubon        0.3.0   <span style="color: #555555;">2022-07-22</span> <span style="color: #555555;">[2]</span> <span style="color: #BB00BB; font-weight: bold;">RSPM</span></span></span>
<span><span class="co">#&gt;  bit            4.0.4   <span style="color: #555555;">2020-08-04</span> <span style="color: #555555;">[2]</span> <span style="color: #BB00BB; font-weight: bold;">RSPM</span></span></span>
<span><span class="co">#&gt;  bit64          4.0.5   <span style="color: #555555;">2020-08-30</span> <span style="color: #555555;">[2]</span> <span style="color: #BB00BB; font-weight: bold;">RSPM</span></span></span>
<span><span class="co">#&gt;  bslib          0.4.0   <span style="color: #555555;">2022-07-16</span> <span style="color: #555555;">[2]</span> <span style="color: #BB00BB; font-weight: bold;">RSPM</span></span></span>
<span><span class="co">#&gt;  cachem         1.0.6   <span style="color: #555555;">2021-08-19</span> <span style="color: #555555;">[2]</span> <span style="color: #BB00BB; font-weight: bold;">RSPM</span></span></span>
<span><span class="co">#&gt;  cli            3.3.0   <span style="color: #555555;">2022-04-25</span> <span style="color: #555555;">[2]</span> <span style="color: #BB00BB; font-weight: bold;">RSPM</span></span></span>
<span><span class="co">#&gt;  crayon         1.5.1   <span style="color: #555555;">2022-03-26</span> <span style="color: #555555;">[2]</span> <span style="color: #BB00BB; font-weight: bold;">RSPM</span></span></span>
<span><span class="co">#&gt;  curl           4.3.2   <span style="color: #555555;">2021-06-23</span> <span style="color: #555555;">[2]</span> <span style="color: #BB00BB; font-weight: bold;">RSPM</span></span></span>
<span><span class="co">#&gt;  desc           1.4.1   <span style="color: #555555;">2022-03-06</span> <span style="color: #555555;">[2]</span> <span style="color: #BB00BB; font-weight: bold;">RSPM</span></span></span>
<span><span class="co">#&gt;  digest         0.6.29  <span style="color: #555555;">2021-12-01</span> <span style="color: #555555;">[2]</span> <span style="color: #BB00BB; font-weight: bold;">RSPM</span></span></span>
<span><span class="co">#&gt;  dplyr          1.0.9   <span style="color: #555555;">2022-04-28</span> <span style="color: #555555;">[2]</span> <span style="color: #BB00BB; font-weight: bold;">RSPM</span></span></span>
<span><span class="co">#&gt;  ellipsis       0.3.2   <span style="color: #555555;">2021-04-29</span> <span style="color: #555555;">[2]</span> <span style="color: #BB00BB; font-weight: bold;">RSPM</span></span></span>
<span><span class="co">#&gt;  evaluate       0.15    <span style="color: #555555;">2022-02-18</span> <span style="color: #555555;">[2]</span> <span style="color: #BB00BB; font-weight: bold;">RSPM</span></span></span>
<span><span class="co">#&gt;  fansi          1.0.3   <span style="color: #555555;">2022-03-24</span> <span style="color: #555555;">[2]</span> <span style="color: #BB00BB; font-weight: bold;">RSPM</span></span></span>
<span><span class="co">#&gt;  fastmap        1.1.0   <span style="color: #555555;">2021-01-25</span> <span style="color: #555555;">[2]</span> <span style="color: #BB00BB; font-weight: bold;">RSPM</span></span></span>
<span><span class="co">#&gt;  fastmatch      1.1-3   <span style="color: #555555;">2021-07-23</span> <span style="color: #555555;">[2]</span> <span style="color: #BB00BB; font-weight: bold;">RSPM</span></span></span>
<span><span class="co">#&gt;  fs             1.5.2   <span style="color: #555555;">2021-12-08</span> <span style="color: #555555;">[2]</span> <span style="color: #BB00BB; font-weight: bold;">RSPM</span></span></span>
<span><span class="co">#&gt;  generics       0.1.3   <span style="color: #555555;">2022-07-05</span> <span style="color: #555555;">[2]</span> <span style="color: #BB00BB; font-weight: bold;">RSPM</span></span></span>
<span><span class="co">#&gt;  gibasa         0.4.0   <span style="color: #555555;">2022-08-05</span> <span style="color: #555555;">[1]</span> <span style="color: #BB00BB; font-weight: bold;">local</span></span></span>
<span><span class="co">#&gt;  glue           1.6.2   <span style="color: #555555;">2022-02-24</span> <span style="color: #555555;">[2]</span> <span style="color: #BB00BB; font-weight: bold;">RSPM</span></span></span>
<span><span class="co">#&gt;  hms            1.1.1   <span style="color: #555555;">2021-09-26</span> <span style="color: #555555;">[2]</span> <span style="color: #BB00BB; font-weight: bold;">RSPM</span></span></span>
<span><span class="co">#&gt;  htmltools      0.5.3   <span style="color: #555555;">2022-07-18</span> <span style="color: #555555;">[2]</span> <span style="color: #BB00BB; font-weight: bold;">RSPM</span></span></span>
<span><span class="co">#&gt;  htmlwidgets    1.5.4   <span style="color: #555555;">2021-09-08</span> <span style="color: #555555;">[2]</span> <span style="color: #BB00BB; font-weight: bold;">RSPM</span></span></span>
<span><span class="co">#&gt;  jquerylib      0.1.4   <span style="color: #555555;">2021-04-26</span> <span style="color: #555555;">[2]</span> <span style="color: #BB00BB; font-weight: bold;">RSPM</span></span></span>
<span><span class="co">#&gt;  jsonlite       1.8.0   <span style="color: #555555;">2022-02-22</span> <span style="color: #555555;">[2]</span> <span style="color: #BB00BB; font-weight: bold;">RSPM</span></span></span>
<span><span class="co">#&gt;  knitr          1.39    <span style="color: #555555;">2022-04-26</span> <span style="color: #555555;">[2]</span> <span style="color: #BB00BB; font-weight: bold;">RSPM</span></span></span>
<span><span class="co">#&gt;  lattice        0.20-45 <span style="color: #555555;">2021-09-22</span> <span style="color: #555555;">[3]</span> <span style="color: #555555;">CRAN (R 4.2.1)</span></span></span>
<span><span class="co">#&gt;  lifecycle      1.0.1   <span style="color: #555555;">2021-09-24</span> <span style="color: #555555;">[2]</span> <span style="color: #BB00BB; font-weight: bold;">RSPM</span></span></span>
<span><span class="co">#&gt;  magrittr       2.0.3   <span style="color: #555555;">2022-03-30</span> <span style="color: #555555;">[2]</span> <span style="color: #BB00BB; font-weight: bold;">RSPM</span></span></span>
<span><span class="co">#&gt;  Matrix         1.4-1   <span style="color: #555555;">2022-03-23</span> <span style="color: #555555;">[3]</span> <span style="color: #555555;">CRAN (R 4.2.1)</span></span></span>
<span><span class="co">#&gt;  memoise        2.0.1   <span style="color: #555555;">2021-11-26</span> <span style="color: #555555;">[2]</span> <span style="color: #BB00BB; font-weight: bold;">RSPM</span></span></span>
<span><span class="co">#&gt;  modeltools     0.2-23  <span style="color: #555555;">2020-03-05</span> <span style="color: #555555;">[2]</span> <span style="color: #BB00BB; font-weight: bold;">RSPM</span></span></span>
<span><span class="co">#&gt;  NLP            0.2-1   <span style="color: #555555;">2020-10-14</span> <span style="color: #555555;">[2]</span> <span style="color: #BB00BB; font-weight: bold;">RSPM</span></span></span>
<span><span class="co">#&gt;  pillar         1.8.0   <span style="color: #555555;">2022-07-18</span> <span style="color: #555555;">[2]</span> <span style="color: #BB00BB; font-weight: bold;">RSPM</span></span></span>
<span><span class="co">#&gt;  pkgconfig      2.0.3   <span style="color: #555555;">2019-09-22</span> <span style="color: #555555;">[2]</span> <span style="color: #BB00BB; font-weight: bold;">RSPM</span></span></span>
<span><span class="co">#&gt;  pkgdown        2.0.6   <span style="color: #555555;">2022-07-16</span> <span style="color: #555555;">[2]</span> <span style="color: #BB00BB; font-weight: bold;">any (@2.0.6)</span></span></span>
<span><span class="co">#&gt;  purrr          0.3.4   <span style="color: #555555;">2020-04-17</span> <span style="color: #555555;">[2]</span> <span style="color: #BB00BB; font-weight: bold;">RSPM</span></span></span>
<span><span class="co">#&gt;  quanteda       3.2.1   <span style="color: #555555;">2022-03-01</span> <span style="color: #555555;">[2]</span> <span style="color: #BB00BB; font-weight: bold;">RSPM</span></span></span>
<span><span class="co">#&gt;  R.cache        0.16.0  <span style="color: #555555;">2022-07-21</span> <span style="color: #555555;">[2]</span> <span style="color: #BB00BB; font-weight: bold;">RSPM</span></span></span>
<span><span class="co">#&gt;  R.methodsS3    1.8.2   <span style="color: #555555;">2022-06-13</span> <span style="color: #555555;">[2]</span> <span style="color: #BB00BB; font-weight: bold;">RSPM</span></span></span>
<span><span class="co">#&gt;  R.oo           1.25.0  <span style="color: #555555;">2022-06-12</span> <span style="color: #555555;">[2]</span> <span style="color: #BB00BB; font-weight: bold;">RSPM</span></span></span>
<span><span class="co">#&gt;  R.utils        2.12.0  <span style="color: #555555;">2022-06-28</span> <span style="color: #555555;">[2]</span> <span style="color: #BB00BB; font-weight: bold;">RSPM</span></span></span>
<span><span class="co">#&gt;  R6             2.5.1   <span style="color: #555555;">2021-08-19</span> <span style="color: #555555;">[2]</span> <span style="color: #BB00BB; font-weight: bold;">RSPM</span></span></span>
<span><span class="co">#&gt;  ragg           1.2.2   <span style="color: #555555;">2022-02-21</span> <span style="color: #555555;">[2]</span> <span style="color: #BB00BB; font-weight: bold;">RSPM</span></span></span>
<span><span class="co">#&gt;  Rcpp           1.0.9   <span style="color: #555555;">2022-07-08</span> <span style="color: #555555;">[2]</span> <span style="color: #BB00BB; font-weight: bold;">RSPM</span></span></span>
<span><span class="co">#&gt;  RcppParallel   5.1.5   <span style="color: #555555;">2022-01-05</span> <span style="color: #555555;">[2]</span> <span style="color: #BB00BB; font-weight: bold;">RSPM</span></span></span>
<span><span class="co">#&gt;  reactable      0.3.0   <span style="color: #555555;">2022-05-26</span> <span style="color: #555555;">[2]</span> <span style="color: #BB00BB; font-weight: bold;">RSPM</span></span></span>
<span><span class="co">#&gt;  reactR         0.4.4   <span style="color: #555555;">2021-02-22</span> <span style="color: #555555;">[2]</span> <span style="color: #BB00BB; font-weight: bold;">RSPM</span></span></span>
<span><span class="co">#&gt;  readr          2.1.2   <span style="color: #555555;">2022-01-30</span> <span style="color: #555555;">[2]</span> <span style="color: #BB00BB; font-weight: bold;">RSPM</span></span></span>
<span><span class="co">#&gt;  rlang          1.0.4   <span style="color: #555555;">2022-07-12</span> <span style="color: #555555;">[2]</span> <span style="color: #BB00BB; font-weight: bold;">RSPM</span></span></span>
<span><span class="co">#&gt;  rmarkdown      2.14    <span style="color: #555555;">2022-04-25</span> <span style="color: #555555;">[2]</span> <span style="color: #BB00BB; font-weight: bold;">RSPM</span></span></span>
<span><span class="co">#&gt;  rprojroot      2.0.3   <span style="color: #555555;">2022-04-02</span> <span style="color: #555555;">[2]</span> <span style="color: #BB00BB; font-weight: bold;">RSPM</span></span></span>
<span><span class="co">#&gt;  sass           0.4.2   <span style="color: #555555;">2022-07-16</span> <span style="color: #555555;">[2]</span> <span style="color: #BB00BB; font-weight: bold;">RSPM</span></span></span>
<span><span class="co">#&gt;  sessioninfo    1.2.2   <span style="color: #555555;">2021-12-06</span> <span style="color: #555555;">[2]</span> <span style="color: #BB00BB; font-weight: bold;">any (@1.2.2)</span></span></span>
<span><span class="co">#&gt;  slam           0.1-50  <span style="color: #555555;">2022-01-08</span> <span style="color: #555555;">[2]</span> <span style="color: #BB00BB; font-weight: bold;">RSPM</span></span></span>
<span><span class="co">#&gt;  stopwords      2.3     <span style="color: #555555;">2021-10-28</span> <span style="color: #555555;">[2]</span> <span style="color: #BB00BB; font-weight: bold;">RSPM</span></span></span>
<span><span class="co">#&gt;  stringi        1.7.8   <span style="color: #555555;">2022-07-11</span> <span style="color: #555555;">[2]</span> <span style="color: #BB00BB; font-weight: bold;">RSPM</span></span></span>
<span><span class="co">#&gt;  stringr        1.4.0   <span style="color: #555555;">2019-02-10</span> <span style="color: #555555;">[2]</span> <span style="color: #BB00BB; font-weight: bold;">RSPM</span></span></span>
<span><span class="co">#&gt;  styler         1.7.0   <span style="color: #555555;">2022-03-13</span> <span style="color: #555555;">[2]</span> <span style="color: #BB00BB; font-weight: bold;">any (@1.7.0)</span></span></span>
<span><span class="co">#&gt;  systemfonts    1.0.4   <span style="color: #555555;">2022-02-11</span> <span style="color: #555555;">[2]</span> <span style="color: #BB00BB; font-weight: bold;">RSPM</span></span></span>
<span><span class="co">#&gt;  textshaping    0.3.6   <span style="color: #555555;">2021-10-13</span> <span style="color: #555555;">[2]</span> <span style="color: #BB00BB; font-weight: bold;">RSPM</span></span></span>
<span><span class="co">#&gt;  tibble         3.1.8   <span style="color: #555555;">2022-07-22</span> <span style="color: #555555;">[2]</span> <span style="color: #BB00BB; font-weight: bold;">RSPM</span></span></span>
<span><span class="co">#&gt;  tidyselect     1.1.2   <span style="color: #555555;">2022-02-21</span> <span style="color: #555555;">[2]</span> <span style="color: #BB00BB; font-weight: bold;">RSPM</span></span></span>
<span><span class="co">#&gt;  tm             0.7-8   <span style="color: #555555;">2020-11-18</span> <span style="color: #555555;">[2]</span> <span style="color: #BB00BB; font-weight: bold;">RSPM</span></span></span>
<span><span class="co">#&gt;  topicmodels    0.2-12  <span style="color: #555555;">2021-01-29</span> <span style="color: #555555;">[2]</span> <span style="color: #BB00BB; font-weight: bold;">RSPM</span></span></span>
<span><span class="co">#&gt;  tzdb           0.3.0   <span style="color: #555555;">2022-03-28</span> <span style="color: #555555;">[2]</span> <span style="color: #BB00BB; font-weight: bold;">RSPM</span></span></span>
<span><span class="co">#&gt;  utf8           1.2.2   <span style="color: #555555;">2021-07-24</span> <span style="color: #555555;">[2]</span> <span style="color: #BB00BB; font-weight: bold;">RSPM</span></span></span>
<span><span class="co">#&gt;  V8             4.2.0   <span style="color: #555555;">2022-05-14</span> <span style="color: #555555;">[2]</span> <span style="color: #BB00BB; font-weight: bold;">RSPM</span></span></span>
<span><span class="co">#&gt;  vctrs          0.4.1   <span style="color: #555555;">2022-04-13</span> <span style="color: #555555;">[2]</span> <span style="color: #BB00BB; font-weight: bold;">RSPM</span></span></span>
<span><span class="co">#&gt;  vroom          1.5.7   <span style="color: #555555;">2021-11-30</span> <span style="color: #555555;">[2]</span> <span style="color: #BB00BB; font-weight: bold;">RSPM</span></span></span>
<span><span class="co">#&gt;  withr          2.5.0   <span style="color: #555555;">2022-03-03</span> <span style="color: #555555;">[2]</span> <span style="color: #BB00BB; font-weight: bold;">RSPM</span></span></span>
<span><span class="co">#&gt;  xfun           0.31    <span style="color: #555555;">2022-05-10</span> <span style="color: #555555;">[2]</span> <span style="color: #BB00BB; font-weight: bold;">RSPM</span></span></span>
<span><span class="co">#&gt;  xml2           1.3.3   <span style="color: #555555;">2021-11-30</span> <span style="color: #555555;">[2]</span> <span style="color: #BB00BB; font-weight: bold;">RSPM</span></span></span>
<span><span class="co">#&gt;  yaml           2.3.5   <span style="color: #555555;">2022-02-21</span> <span style="color: #555555;">[2]</span> <span style="color: #BB00BB; font-weight: bold;">RSPM</span></span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #555555;"> [1] /tmp/Rtmp5HueAW/temp_libpath5b104b9d5fe9</span></span></span>
<span><span class="co">#&gt; <span style="color: #555555;"> [2] /home/runner/work/_temp/Library</span></span></span>
<span><span class="co">#&gt; <span style="color: #555555;"> [3] /opt/R/4.2.1/lib/R/library</span></span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB; font-weight: bold;">──────────────────────────────────────────────────────────────────────────────</span></span></span></code></pre></div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Akiru Kato.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
